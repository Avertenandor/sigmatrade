<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–æ–≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            padding: 40px;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
        }

        h1 {
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-align: center;
        }

        .test-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .test-section h2 {
            margin-bottom: 15px;
            color: #ffd700;
        }

        .translation-example {
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            margin: 10px 0;
            font-size: 1.1rem;
        }

        .key {
            color: #ffd700;
            font-weight: 600;
        }

        .lang-switcher {
            position: fixed !important;
            top: 20px !important;
            right: 20px !important;
            background: rgba(255, 255, 255, 0.2) !important;
            backdrop-filter: blur(10px) !important;
            padding: 12px 20px !important;
            border-radius: 12px !important;
            border: 2px solid rgba(255, 255, 255, 0.3) !important;
            display: flex !important;
            align-items: center !important;
            gap: 10px !important;
            z-index: 10000 !important;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2) !important;
        }

        .lang-switcher label {
            font-size: 1.5rem !important;
        }

        .lang-switcher select {
            background: rgba(255, 255, 255, 0.9) !important;
            color: #2d3748 !important;
            border: 2px solid #667eea !important;
            padding: 8px 15px !important;
            border-radius: 8px !important;
            font-size: 16px !important;
            font-weight: 700 !important;
            cursor: pointer !important;
            transition: all 0.2s !important;
        }

        .lang-switcher select:hover {
            background: white !important;
            border-color: #764ba2 !important;
        }

        .lang-switcher select option {
            background: white !important;
            color: #2d3748 !important;
        }

        .log {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
        }

        .log-entry {
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-time {
            color: #a0aec0;
            margin-right: 10px;
        }

        .log-success {
            color: #48bb78;
        }

        .log-error {
            color: #f56565;
        }

        .log-info {
            color: #4299e1;
        }

        button {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            margin: 5px;
        }

        button:hover {
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 data-i18n="meta.title">üåê –¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–æ–≤</h1>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="currentLangDisplay">RU</div>
                <div class="stat-label">–¢–µ–∫—É—â–∏–π —è–∑—ã–∫</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="switchCount">0</div>
                <div class="stat-label">–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π</div>
            </div>
        </div>

        <div class="test-section">
            <h2>üìù –ü—Ä–∏–º–µ—Ä—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤</h2>
            
            <div class="translation-example">
                <span class="key">nav.exchange:</span>
                <span data-i18n="nav.exchange">–ë–æ—Ç-–æ–±–º–µ–Ω–Ω–∏–∫</span>
            </div>

            <div class="translation-example">
                <span class="key">nav.mev:</span>
                <span data-i18n="nav.mev">–ú–≠–í-–±–æ—Ç</span>
            </div>

            <div class="translation-example">
                <span class="key">nav.arbitrage:</span>
                <span data-i18n="nav.arbitrage">–ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–π –±–æ—Ç</span>
            </div>

            <div class="translation-example">
                <span class="key">header.wallet_label:</span>
                <span data-i18n="header.wallet_label">–ö–æ—à–µ–ª—ë–∫:</span>
            </div>
        </div>

        <div class="test-section">
            <h2>üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h2>
            <button onclick="testSwitchToEnglish()">üá¨üáß –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ EN</button>
            <button onclick="testSwitchToRussian()">üá∑üá∫ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ RU</button>
            <button onclick="testSwitchToSpanish()">üá™üá∏ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ ES</button>
            <button onclick="clearLog()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
        </div>

        <div class="test-section">
            <h2>üìã –õ–æ–≥ —Å–æ–±—ã—Ç–∏–π</h2>
            <div class="log" id="eventLog"></div>
        </div>
    </div>

    <script src="i18n.js?v=2.2.0"></script>
    <script src="lang-switcher.js?v=2.2.0"></script>

    <script>
        let switchCount = 0;

        function addLog(message, type = 'info') {
            const log = document.getElementById('eventLog');
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            
            const time = new Date().toLocaleTimeString();
            const colorClass = type === 'success' ? 'log-success' : 
                              type === 'error' ? 'log-error' : 'log-info';
            
            entry.innerHTML = `<span class="log-time">[${time}]</span><span class="${colorClass}">${message}</span>`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        function updateStats() {
            const currentLang = localStorage.getItem('i18n:lang') || 'ru';
            document.getElementById('currentLangDisplay').textContent = currentLang.toUpperCase();
            document.getElementById('switchCount').textContent = switchCount;
        }

        async function testSwitchToEnglish() {
            addLog('üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π...', 'info');
            try {
                if (window.I18N && window.I18N.set) {
                    await window.I18N.set('en');
                    switchCount++;
                    updateStats();
                    addLog('‚úÖ –£—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π', 'success');
                } else {
                    addLog('‚ùå I18N.set –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                }
            } catch (error) {
                addLog(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }

        async function testSwitchToRussian() {
            addLog('üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–∏–π...', 'info');
            try {
                if (window.I18N && window.I18N.set) {
                    await window.I18N.set('ru');
                    switchCount++;
                    updateStats();
                    addLog('‚úÖ –£—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ —Ä—É—Å—Å–∫–∏–π', 'success');
                } else {
                    addLog('‚ùå I18N.set –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                }
            } catch (error) {
                addLog(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }

        async function testSwitchToSpanish() {
            addLog('üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –∏—Å–ø–∞–Ω—Å–∫–∏–π...', 'info');
            try {
                if (window.I18N && window.I18N.set) {
                    await window.I18N.set('es');
                    switchCount++;
                    updateStats();
                    addLog('‚úÖ –£—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ –∏—Å–ø–∞–Ω—Å–∫–∏–π', 'success');
                } else {
                    addLog('‚ùå I18N.set –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                }
            } catch (error) {
                addLog(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }

        function clearLog() {
            document.getElementById('eventLog').innerHTML = '';
            addLog('üóëÔ∏è –õ–æ–≥ –æ—á–∏—â–µ–Ω', 'info');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.addEventListener('DOMContentLoaded', () => {
            addLog('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞', 'success');
            
            setTimeout(() => {
                if (window.I18N) {
                    addLog(`‚úÖ I18N –Ω–∞–π–¥–µ–Ω. –í–µ—Ä—Å–∏—è: ${window.I18N.I18N_VERSION}`, 'success');
                    addLog(`üìã –î–æ—Å—Ç—É–ø–Ω–æ —è–∑—ã–∫–æ–≤: ${window.I18N.AVAILABLE_LOCALES.length}`, 'info');
                    addLog(`üåê –Ø–∑—ã–∫–∏: ${window.I18N.AVAILABLE_LOCALES.join(', ')}`, 'info');
                    updateStats();
                } else {
                    addLog('‚ùå I18N –Ω–µ –Ω–∞–π–¥–µ–Ω!', 'error');
                }
            }, 500);
        });

        // –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π localStorage
        window.addEventListener('storage', (e) => {
            if (e.key === 'i18n:lang') {
                addLog(`üîÑ –Ø–∑—ã–∫ –∏–∑–º–µ–Ω—ë–Ω –Ω–∞: ${e.newValue}`, 'info');
                updateStats();
            }
        });
    </script>
</body>
</html>
