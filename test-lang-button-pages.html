<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–æ–ø–∫–∏ —è–∑—ã–∫–æ–≤ –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            padding: 40px 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5rem;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .page-test {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            color: #2d3748;
        }

        .page-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .page-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2d3748;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-checking {
            background: #edf2f7;
            color: #4a5568;
        }

        .status-success {
            background: #c6f6d5;
            color: #22543d;
        }

        .status-error {
            background: #fed7d7;
            color: #742a2a;
        }

        .page-details {
            padding: 15px;
            background: #f7fafc;
            border-radius: 8px;
            margin-top: 10px;
        }

        .detail-item {
            display: flex;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: 600;
            color: #4a5568;
            width: 200px;
        }

        .detail-value {
            color: #2d3748;
            flex: 1;
        }

        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: block;
            width: 100%;
            max-width: 400px;
            margin: 30px auto;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .test-button:active {
            transform: translateY(0);
        }

        .summary {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
            color: #2d3748;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .stat-item {
            padding: 15px;
            border-radius: 8px;
        }

        .stat-item.total {
            background: #edf2f7;
        }

        .stat-item.success {
            background: #c6f6d5;
        }

        .stat-item.failed {
            background: #fed7d7;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #4a5568;
        }

        .iframe-preview {
            width: 100%;
            height: 300px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            margin-top: 10px;
        }

        .toggle-preview {
            background: #4299e1;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 10px;
        }

        .toggle-preview:hover {
            background: #3182ce;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–æ–ø–∫–∏ —è–∑—ã–∫–æ–≤ –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö</h1>

        <div class="summary" id="summary">
            <h2 style="margin-bottom: 15px;">–°–≤–æ–¥–∫–∞</h2>
            <div class="summary-stats">
                <div class="stat-item total">
                    <div class="stat-number" id="totalPages">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü</div>
                </div>
                <div class="stat-item success">
                    <div class="stat-number" id="successPages">0</div>
                    <div class="stat-label">–° –∫–Ω–æ–ø–∫–æ–π</div>
                </div>
                <div class="stat-item failed">
                    <div class="stat-number" id="failedPages">0</div>
                    <div class="stat-label">–ë–µ–∑ –∫–Ω–æ–ø–∫–∏</div>
                </div>
            </div>
        </div>

        <button class="test-button" onclick="runTest()">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É</button>

        <div id="results"></div>
    </div>

    <script>
        const pages = [
            { name: '–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞', url: 'index.html' },
            { name: '–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞', url: 'login.html' },
            { name: '–¢–µ—Å—Ç i18n (–±–∞–∑–æ–≤—ã–π)', url: 'test-i18n.html' },
            { name: '–¢–µ—Å—Ç i18n (–ø–æ–ª–Ω—ã–π)', url: 'test-i18n-full.html' }
        ];

        let stats = {
            total: 0,
            success: 0,
            failed: 0
        };

        function updateSummary() {
            document.getElementById('totalPages').textContent = stats.total;
            document.getElementById('successPages').textContent = stats.success;
            document.getElementById('failedPages').textContent = stats.failed;
        }

        async function checkPage(page) {
            const resultDiv = document.getElementById('results');
            
            const pageTest = document.createElement('div');
            pageTest.className = 'page-test';
            pageTest.id = `test-${page.name.replace(/\s+/g, '-')}`;
            
            pageTest.innerHTML = `
                <div class="page-header">
                    <div class="page-name">${page.name}</div>
                    <div class="status-badge status-checking">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
                </div>
                <div class="page-details" style="display: none;">
                    <div class="detail-item">
                        <div class="detail-label">URL:</div>
                        <div class="detail-value">${page.url}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">i18n.js:</div>
                        <div class="detail-value" id="i18n-${page.name}">‚Äî</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">lang-switcher.js:</div>
                        <div class="detail-value" id="switcher-${page.name}">‚Äî</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å:</div>
                        <div class="detail-value" id="button-${page.name}">‚Äî</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">–≠–ª–µ–º–µ–Ω—Ç—ã data-i18n:</div>
                        <div class="detail-value" id="elements-${page.name}">‚Äî</div>
                    </div>
                    <button class="toggle-preview" onclick="togglePreview('${page.name}')">
                        –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–≤—å—é
                    </button>
                    <iframe class="iframe-preview" id="preview-${page.name}" style="display: none;"></iframe>
                </div>
            `;
            
            resultDiv.appendChild(pageTest);
            stats.total++;
            updateSummary();

            try {
                const response = await fetch(page.url);
                if (!response.ok) {
                    throw new Error(`–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ (${response.status})`);
                }

                const html = await response.text();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤
                const hasI18n = html.includes('i18n.js');
                const hasSwitcher = html.includes('lang-switcher.js');
                const hasDataI18n = html.includes('data-i18n');
                
                // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã data-i18n
                const dataI18nMatches = html.match(/data-i18n=/g);
                const dataI18nCount = dataI18nMatches ? dataI18nMatches.length : 0;

                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ—Ç–∞–ª–∏
                document.getElementById(`i18n-${page.name}`).innerHTML = 
                    hasI18n ? '<span style="color: #22543d;">‚úÖ –ü–æ–¥–∫–ª—é—á—ë–Ω</span>' : '<span style="color: #742a2a;">‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω</span>';
                
                document.getElementById(`switcher-${page.name}`).innerHTML = 
                    hasSwitcher ? '<span style="color: #22543d;">‚úÖ –ü–æ–¥–∫–ª—é—á—ë–Ω</span>' : '<span style="color: #742a2a;">‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω</span>';
                
                if (hasI18n && hasSwitcher) {
                    document.getElementById(`button-${page.name}`).innerHTML = 
                        '<span style="color: #22543d;">‚úÖ –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è (—Å–æ–∑–¥–∞—ë—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)</span>';
                    stats.success++;
                } else {
                    document.getElementById(`button-${page.name}`).innerHTML = 
                        '<span style="color: #742a2a;">‚ùå –ù–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ (–Ω–µ—Ç —Å–∫—Ä–∏–ø—Ç–æ–≤)</span>';
                    stats.failed++;
                }
                
                document.getElementById(`elements-${page.name}`).innerHTML = 
                    `${dataI18nCount} —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞–π–¥–µ–Ω–æ`;

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
                const statusBadge = pageTest.querySelector('.status-badge');
                if (hasI18n && hasSwitcher) {
                    statusBadge.className = 'status-badge status-success';
                    statusBadge.textContent = '‚úÖ –ì–æ—Ç–æ–≤–æ';
                } else {
                    statusBadge.className = 'status-badge status-error';
                    statusBadge.textContent = '‚ùå –ü—Ä–æ–±–ª–µ–º–∞';
                }

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª–∏
                pageTest.querySelector('.page-details').style.display = 'block';

            } catch (error) {
                const statusBadge = pageTest.querySelector('.status-badge');
                statusBadge.className = 'status-badge status-error';
                statusBadge.textContent = '‚ùå –û—à–∏–±–∫–∞';
                
                pageTest.querySelector('.page-details').innerHTML = `
                    <div style="color: #742a2a; padding: 15px;">
                        <strong>–û—à–∏–±–∫–∞:</strong> ${error.message}
                    </div>
                `;
                pageTest.querySelector('.page-details').style.display = 'block';
                stats.failed++;
            }

            updateSummary();
        }

        async function runTest() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '';
            stats = { total: 0, success: 0, failed: 0 };
            updateSummary();

            for (const page of pages) {
                await checkPage(page);
                await new Promise(resolve => setTimeout(resolve, 300));
            }

            // –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç
            const finalReport = document.createElement('div');
            finalReport.className = 'page-test';
            finalReport.style.background = stats.failed === 0 ? 'rgba(72, 187, 120, 0.1)' : 'rgba(245, 101, 101, 0.1)';
            finalReport.innerHTML = `
                <h3 style="margin-bottom: 15px;">üìä –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç</h3>
                <div style="padding: 15px; background: white; border-radius: 8px;">
                    <p style="margin-bottom: 10px;"><strong>–í—Å–µ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ:</strong> ${stats.total}</p>
                    <p style="margin-bottom: 10px; color: #22543d;"><strong>–°—Ç—Ä–∞–Ω–∏—Ü —Å –∫–Ω–æ–ø–∫–æ–π:</strong> ${stats.success}</p>
                    <p style="margin-bottom: 10px; color: #742a2a;"><strong>–°—Ç—Ä–∞–Ω–∏—Ü –±–µ–∑ –∫–Ω–æ–ø–∫–∏:</strong> ${stats.failed}</p>
                    ${stats.failed === 0 
                        ? '<p style="margin-top: 15px; padding: 15px; background: #c6f6d5; border-radius: 8px; color: #22543d;"><strong>‚úÖ –û—Ç–ª–∏—á–Ω–æ!</strong> –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–º–µ—é—Ç —Å–∏—Å—Ç–µ–º—É —Å–º–µ–Ω—ã —è–∑—ã–∫–∞.</p>' 
                        : '<p style="margin-top: 15px; padding: 15px; background: #fed7d7; border-radius: 8px; color: #742a2a;"><strong>‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ!</strong> –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ –∏–º–µ—é—Ç —Å–∏—Å—Ç–µ–º—ã —Å–º–µ–Ω—ã —è–∑—ã–∫–∞. –î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã i18n.js –∏ lang-switcher.js.</p>'
                    }
                </div>
            `;
            resultsDiv.appendChild(finalReport);
        }

        function togglePreview(pageName) {
            const preview = document.getElementById(`preview-${pageName}`);
            const button = event.target;
            
            if (preview.style.display === 'none') {
                const page = pages.find(p => p.name === pageName);
                preview.src = page.url;
                preview.style.display = 'block';
                button.textContent = '–°–∫—Ä—ã—Ç—å –ø—Ä–µ–≤—å—é';
            } else {
                preview.style.display = 'none';
                button.textContent = '–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–≤—å—é';
            }
        }

        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('DOMContentLoaded', () => {
            setTimeout(runTest, 500);
        });
    </script>
</body>
</html>
